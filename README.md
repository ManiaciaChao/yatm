<h1 align="center">Welcome to yatm ğŸ‘‹</h1>
<p>
  <a href="#" target="_blank">
    <img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg" />
  </a>
</p>

> yet another teachermate helper

## Features

- Multi-mode sign-in support: normal, GPS and QR code.
- Automatically sign in **WITHOUT any assistance** from your classmates
- System-level notification support (test on windows 10 & macOS & gnome)
- Active development
- <del>Docker support</del> Incoming!

## Install

Simply download the latest release.

or you can build on your own.

```sh
yarn install
yarn build
```

## Configuration

Create a `config.json` first:

```bash
cp sample.config.json config.json
```

**Then edit it:**

```javascript
{
  "interval": 10000, // ç­¾åˆ°æ£€æµ‹è½®è¯¢é—´éš”ï¼Œå•ä½ ms
  "wait": 5000,     // æ£€æµ‹åˆ°ç­¾åˆ°åç­‰å¾…æ—¶é•¿ï¼Œå•ä½ ms
  // ç”¨äº GPS ç­¾åˆ°ï¼ˆå¤§æ¦‚æ˜¯ Google åæ ‡ï¼‰
  "lat": 30.511227, // çº¬åº¦
  "lon": 114.41021, // ç»åº¦
  //å‰ªè´´æ¿æŒ‡ä»¤
  "clipboard": { // è¯»å†™å‰ªè´´æ¿çš„ CLI command
    "paste": "pbpaste", // è‹¥ä¸ä¸ºç©ºï¼Œåˆ™ä¼˜å…ˆå°è¯•ä»å‰ªè´´æ¿è·å– openId
    "copy": "echo {} | pbcopy", // qr.mode == "copy" æ—¶å¯ç”¨ï¼Œ{} ä¸ºå ä½ç¬¦
  },
  "qr": { // ç”¨äºäºŒç»´ç ç­¾åˆ°
    // æ¨¡å¼
    //   terminal: ç»ˆç«¯æ‰“å°äºŒç»´ç ï¼Œå¾®ä¿¡æ‰«ç 
    //   plainï¼š ç»ˆç«¯æ‰“å°ç­¾åˆ°URLï¼Œå¾®ä¿¡æ‰“å¼€
    //   copyï¼šåŒ plainï¼Œå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿
    "mode": "terminal",
  }
  "ua": "" // å»ºè®®ä½¿ç”¨è‡ªå·±çš„å¾®ä¿¡ UA
}

```

## Usage

### Get your `openId`

Get your `openId` from WeChat official account `å¾®åŠ©æ•™æœåŠ¡å·`. [How?](./docs/AcquireOpenID.md)

**Notice that `openId` will expire after thousands of requests or another entrace from WeChat.**

### Run the script

Run the script, then paste your `openId` into console:

```sh
yarn start
```

or with environments:

```sh
env OPEN_ID=${your openId} yarn start
```

For normal & GPS sign-in, the process is automatic. You don't need to care about anything.

If the `openId` is expired or invaild, you'll get a notification :)

### For QR Code sign-in

Due to the limitation of WeChat API, things are quite different for QR code sign-in.

The script will subscribe the sign-in URL generated by teachermate's server, and print its corresponding QR code to the console when it updates.

You're expected to scan the QR code **manually via WeChat** from your console.

Attention that **the script WILL EXIT INSTANTLY when success, because a QR scan
via WeChat will causes the update of `openId`. You have to reacquire your new
`openId` and run this script again!**

### *Experimental* Devtools Protocol

Due to the limitation of WeChat API, the following WeChat-related processes can't be simulated:

* generate new `openId`
* simulate the QR scanning

However, [Devtools Protocol](https://chromedevtools.github.io/devtools-protocol/) can help automatize the whole thing.

Check [this](./docs/DevtoolsProtocol.md) for more details.

## Author

ğŸ‘¤ **maniacata**

- Website: http://blog.plus1sec.cn
- Github: [@ManiaciaChao](https://github.com/ManiaciaChao)

## Show your support

Give a â­ï¸ if this project helped you!

---

_This README was generated with â¤ï¸ by [readme-md-generator](https://github.com/kefranabg/readme-md-generator)_
